pragma solidity ^0.4.0;
contract Signer {
    
    struct Signdetails {
        string documentId;
        string initHash;
        string email;
        string signedHash;
        bool isSigned;
        string timestamp;
    }

    address deployer;
    string accountId;
    string documentId;
    string email;
    string initHash;
    
    mapping(string => Signdetails) signDetailsMap;
    
    function Signer(string _accountId) public {
        deployer = msg.sender;
        accountId = _accountId;
    }
    
    function initSign(string _documentId, string _initHash, string _email) public {
       signDetailsMap[_documentId] = Signdetails(_documentId,_initHash,_email,'',false,''); 
    }
    //onlyOwner 
    
    function finishSign(string _documentId, string _signedHash, string _timestamp) public{
         Signdetails storage currentSignDetail = signDetailsMap[_documentId];
         currentSignDetail.signedHash = _signedHash;
         currentSignDetail.timestamp = _timestamp;
         currentSignDetail.isSigned = true;
    }
    
    function verifySign(string _documentId) public constant returns(bool _isSigned){
        Signdetails storage currentSignDetail2 = signDetailsMap[_documentId];
        _isSigned =  currentSignDetail2.isSigned;
    } 
    
    
    function getDetails(string _documentId)  public constant returns(string,string,string,string,bool,string){
        Signdetails storage currentSignDetail3 = signDetailsMap[_documentId];
        return (currentSignDetail3.documentId,currentSignDetail3.initHash,currentSignDetail3.email,currentSignDetail3.signedHash,currentSignDetail3.isSigned,currentSignDetail3.timestamp);
    } 
    
    
}

config.contracts.signer.abi = [{"constant":true,"inputs":[{"name":"_documentId","type":"string"}],"name":"getDetails","outputs":[{"name":"","type":"string"},{"name":"","type":"string"},{"name":"","type":"string"},{"name":"","type":"string"},{"name":"","type":"bool"},{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_documentId","type":"string"},{"name":"_initHash","type":"string"},{"name":"_email","type":"string"}],"name":"initSign","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_documentId","type":"string"}],"name":"verifySign","outputs":[{"name":"_isSigned","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_documentId","type":"string"},{"name":"_signedHash","type":"string"},{"name":"_timestamp","type":"string"}],"name":"finishSign","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[{"name":"_accountId","type":"string"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"}];
config.contracts.signer.data = '6060604052341561000f57600080fd5b604051610e78380380610e7883398101604052808051820191905050336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508060019080519060200190610081929190610088565b505061012d565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106100c957805160ff19168380011785556100f7565b828001600101855582156100f7579182015b828111156100f65782518255916020019190600101906100db565b5b5090506101049190610108565b5090565b61012a91905b8082111561012657600081600090555060010161010e565b5090565b90565b610d3c8061013c6000396000f300606060405260043610610062576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680631328fd8f146100675780632cfe50df146102f85780636f513021146103db578063fc7606f814610450575b600080fd5b341561007257600080fd5b6100c2600480803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050610533565b6040518080602001806020018060200180602001871515151581526020018060200186810386528c818151815260200191508051906020019080838360005b8381101561011c578082015181840152602081019050610101565b50505050905090810190601f1680156101495780820380516001836020036101000a031916815260200191505b5086810385528b818151815260200191508051906020019080838360005b83811015610182578082015181840152602081019050610167565b50505050905090810190601f1680156101af5780820380516001836020036101000a031916815260200191505b5086810384528a818151815260200191508051906020019080838360005b838110156101e85780820151818401526020810190506101cd565b50505050905090810190601f1680156102155780820380516001836020036101000a031916815260200191505b50868103835289818151815260200191508051906020019080838360005b8381101561024e578082015181840152602081019050610233565b50505050905090810190601f16801561027b5780820380516001836020036101000a031916815260200191505b50868103825287818151815260200191508051906020019080838360005b838110156102b4578082015181840152602081019050610299565b50505050905090810190601f1680156102e15780820380516001836020036101000a031916815260200191505b509b50505050505050505050505060405180910390f35b341561030357600080fd5b6103d9600480803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050610914565b005b34156103e657600080fd5b610436600480803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050610a89565b604051808215151515815260200191505060405180910390f35b341561045b57600080fd5b610531600480803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050610b13565b005b61053b610bd7565b610543610bd7565b61054b610bd7565b610553610bd7565b600061055d610bd7565b60006005886040518082805190602001908083835b6020831015156105975780518252602082019150602081019050602083039250610572565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390209050806000018160010182600201836003018460040160009054906101000a900460ff1685600501858054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156106875780601f1061065c57610100808354040283529160200191610687565b820191906000526020600020905b81548152906001019060200180831161066a57829003601f168201915b50505050509550848054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156107235780601f106106f857610100808354040283529160200191610723565b820191906000526020600020905b81548152906001019060200180831161070657829003601f168201915b50505050509450838054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156107bf5780601f10610794576101008083540402835291602001916107bf565b820191906000526020600020905b8154815290600101906020018083116107a257829003601f168201915b50505050509350828054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561085b5780601f106108305761010080835404028352916020019161085b565b820191906000526020600020905b81548152906001019060200180831161083e57829003601f168201915b50505050509250808054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156108f75780601f106108cc576101008083540402835291602001916108f7565b820191906000526020600020905b8154815290600101906020018083116108da57829003601f168201915b505050505090509650965096509650965096505091939550919395565b60c0604051908101604052808481526020018381526020018281526020016020604051908101604052806000815250815260200160001515815260200160206040519081016040528060008152508152506005846040518082805190602001908083835b60208310151561099d5780518252602082019150602081019050602083039250610978565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060008201518160000190805190602001906109ec929190610beb565b506020820151816001019080519060200190610a09929190610beb565b506040820151816002019080519060200190610a26929190610beb565b506060820151816003019080519060200190610a43929190610beb565b5060808201518160040160006101000a81548160ff02191690831515021790555060a0820151816005019080519060200190610a80929190610beb565b50905050505050565b6000806005836040518082805190602001908083835b602083101515610ac45780518252602082019150602081019050602083039250610a9f565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902090508060040160009054906101000a900460ff16915050919050565b60006005846040518082805190602001908083835b602083101515610b4d5780518252602082019150602081019050602083039250610b28565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020905082816003019080519060200190610b9a929190610c6b565b5081816005019080519060200190610bb3929190610c6b565b5060018160040160006101000a81548160ff02191690831515021790555050505050565b602060405190810160405280600081525090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610c2c57805160ff1916838001178555610c5a565b82800160010185558215610c5a579182015b82811115610c59578251825591602001919060010190610c3e565b5b509050610c679190610ceb565b5090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610cac57805160ff1916838001178555610cda565b82800160010185558215610cda579182015b82811115610cd9578251825591602001919060010190610cbe565b5b509050610ce79190610ceb565b5090565b610d0d91905b80821115610d09576000816000905550600101610cf1565b5090565b905600a165627a7a723058203353fa04972132f885a7eb15662fd2ccf48e3a45f7c89c6aad164cda41de2cdb0029';